<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unblockee</title>
    <style>
        #toggle-view { position: fixed; bottom: 10px; left: 25px; padding: 10px 20px; background: black; border: none; border-radius: 5px; color: white; cursor: pointer; font-size: 16px; transition: background 0.3s; }
        #toggle-view:hover { background: #333; }
        #website-list.websites { margin-top: 50px; }
        #website-list .website-row { display: flex; justify-content: center; gap: 15px; margin: 10px 0; }
        #website-list .websites { width: 200px; height: 66px; margin: 4px; text-align>center; display: flex; justify-content: center; align-items: center; word-wrap: break-word; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(3px); z-index: 10; transform: scale(1.0); transition: transform 0.2s, opacity 0.1s; cursor: pointer; border: none; border-radius: 5px; color: white; font-size: 18px; text-decoration: none; padding: 10px; font-weight: bold; opacity: 0.85; }
        #website-list .websites:hover { opacity: 0.95; transform: scale(1.20); }
        body { background: #f0f0f0; color: black; font-family: Arial, sans-serif; text-align: center; overflow: hidden; margin: 0; }
        .background { display: none; }
        .effects-container { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 5; overflow: hidden; }
        
        .settings-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); justify-content: center; align-items: center; z-index: 1000; }
        .settings-content { background: #222; padding: 20px; border-radius: 5px; width: 300px; }
        .settings-header { display: flex; justify-content: space-between; align-items: center; }
        .close-btn { background: none; border: none; color: white; font-size: 24px; cursor: pointer; }
        .setting-item { display: flex; justify-content: space-between; align-items: center; margin: 10px 0; }
        select { background: #333; color: white; padding: 5px; border: none; border-radius: 3px; }
    </style>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="background"></div>
    <h1 id="page-header">Unblockee games</h1>

    <div class="game-list" id="game-list">
        <div class="row">
            <div class="game"><a href="games/1v1.lolmenu.html"><img src="pictures/1v1.lol.webp" alt="1v1.lol"><p>1v1.lol</p></a></div>
            <div class="game"><a href="games/RetroBowl.html"><img src="pictures/retrobowl picture.webp" alt="Retro Bowl"><p>Retro Bowl</p></a></div>
            <div class="game"><a href="games/slopemenu.html"><img src="pictures/slope.webp" alt="Slope"><p>Slope</p></a></div>
            <div class="game"><a href="games/buildnow.html"><img src="pictures/buildnow.webp" alt="Buildnow"><p>BuildNow</p></a></div>
            <div class="game"><a href="games/basketrandom.html"><img src="pictures/basketrandom.jpg" alt="Basket Random"><p>BasketRandom</p></a></div>
            <div class="game"><a href="games/basketballstars.html"><img src="pictures/basketballstars.webp" alt="Basketball Stars"><p>Basketball Stars</p></a></div>
            <div class="game"><a href="games/Minecraft.html"><img src="pictures/mincraft.webp" alt="Minecraft"><p>Minecraft</p></a></div>
            <div class="game"><a href="games/territorial.html"><img src="pictures/territorial.jpg" alt="Territorial.io"><p>Territorial.io</p></a></div>
        </div>
        <div class="row">
            <div class="game"><a href="games/Rocketleague.html"><img src="pictures/rocketleague.webp" alt="RocketLeague"><p>RocketLeague</p></a></div>
            <div class="game"><a href="games/slowroads.io.html"><img src="pictures/slowroads.webp" alt="Slowroads"><p>Slowroads</p></a></div>
            <div class="game"><a href="games/zombsroyale.html"><img src="pictures/zombsroyale.webp" alt="ZombsRoyale"><p>ZombsRoyale</p></a></div>
            <div class="game"><a href="games/krunker.html"><img src="pictures/krunker.webp" alt="Krunker"><p>Krunker</p></a></div>
            <div class="game"><a href="games/boxingrandom.html"><img src="pictures/boxingrandom.webp" alt=""><p>Boxing Random</p></a></div>
            <div class="game"><a href="games/Fnaf.html"><img src="pictures/fnaf.webp" alt="FNAF"><p>Fnaf</p></a></div>
            <div class="game"><a href="games/Snowrider.html"><img src="pictures/snowrider.webp" alt="SnowRider"><p>Snow Rider</p></a></div>
            <div class="game"><a href="games/deadshot.html"><img src="pictures/deadshot.webp" alt="Deadshot"><p>Deadshot.io</p></a></div>
            <div class="game"><a href="games/openfront.html"><img src="pictures/openfront.webp" alt="openfront"><p>Openfront</p></a></div>
        </div>
        <div class="row">
            <div class="game"><a href="games/amongus.html"><img src="pictures/amoungus.webp" alt="Game"><p>AmongUs</p></a></div>
            <div class="game"><a href="games/cookieclicker.html"><img src="pictures/cookieclicker.png" alt="Game"><p>Cookie Clicker</p></a></div>
            <div class="game"><a href="games/footballbros.html"><img src="pictures/footballbros.webp" alt="Game"><p>Football Bros</p></a></div>
            <div class="game"><a href="games/stickmanhook.html"><img src="pictures/StickmanHook.webp" alt="Game"><p>Stickman Hook</p></a></div>
            <div class="game"><a href="games/hole.html"><img src="pictures/Hole.webp" alt="Game"><p>Hole.io</p></a></div>
        </div>
    </div>

    <div id="website-list" class="websites" style="display: none;">
        <div class="website-row">
            <a href="/sites/astroid.html" class="websites">Astroid proxy</a>
            <a href="/sites/lunaar.html" class="websites">Lunaar proxy</a>
            <a href="/sites/space.html" class="websites">Space proxy</a>
            <a href="/sites/interstellar.html" class="websites">Interstellar proxy</a>
            <a href="/sites/lp.html" class="websites">Lupine Vault</a>
        </div>
        <div class="website-row">
            <a href="/sites/nettleweb.html" class="websites">Nettleweb</a>
            <a href="/sites/gba.html" class="websites">Gba online</a>
            <a href="/sites/reds.html" class="websites">Reds corner</a>
            <a href="/sites/skippers.html" class="websites">Skippers games</a>
            <a href="/sites/utopia.html" class="websites">Utopia proxy</a>
            <a href="/sites/fb.html" class="websites">Freedom Browser</a>
        </div>
        <div class="website-row">
            <a href="/sites/ghub.html" class="websites">Ghub</a>
        </div>
    </div>

    <div class="row">
        <div class="custom-content">
            <div style="display: flex; justify-content: center; gap: 10px;" id="urlInputContainer">
                <input type="text" id="urlInput" placeholder="Enter a URL" style="width: 250px; padding: 10px; font-size: 14px; background: rgba(0, 0, 0, 0.7); color: white; border: none; outline: none; border-radius: 4px;">
                <button class="content-button" onclick="addContent()">Add Custom URL</button>
            </div>
            <div id="contentList" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 10px;"></div>
            <div style="display: flex; justify-content: center; gap: 10px; margin-top: 10px;" id="buttonContainer">
                <button class="content-button" id="deleteLastButton" onclick="deleteLastContent()">Delete Last</button>
                <button class="content-button" onclick="deleteAllContent()">Clear All</button>
            </div>
        </div>
    </div>

    <button id="toggle-view" onclick="toggleView()">Toggle Websites</button>

    <div class="sidebar">
        <div class="sidebar-title">Unblockee</div>
        <ul>
            <li><span onclick="toggleChangelog()">Changelog</span></li>
            <li><a href="chat/chatcloak.html">Chat</a></li>
            <li><a href="movies/watch/index">Movies</a></li>
            <li><a href="/active">Proxy</a></li>
            <li><span onclick="toggleSettings()">Settings</span></li>
            <li><a href="disablers/disablermenu.html">Extension Disabler</a></li>
            <li><a href="Coderunner.html">Code Runner</a></li>
            <li><a href="DataUrl.html">DataUrlGen</a></li>
            <li><a href="Download.html">Download</a></li>
            <li><span class="sidebar-note">Proxy and Movies won’t work on Neocities</span></li>
        </ul>
    </div>

    <div class="changelog-content" id="changelog-content">
        <strong>Changelog:</strong>
        <ul>
            <li>Date of creation: 1/16/25 v3</li>
            <li>Added unblocked websites</li>
            <li>Fixed cloaks, deleted background change color</li>
            <li>Added anti-close which stops the tab from being closed</li>
            <li>Added about:blank auto open</li>
            <li>Hopefully made comethanger work for longer</li>
            <li>Changed how the stars behave</li>
        </ul>
    </div>

    <div class="settings-overlay" id="settings-overlay">
        <div class="settings-content">
            <div class="settings-header">
                <h2>Settings</h2>
                <button class="close-btn" onclick="toggleSettings()">×</button>
            </div>
            <div class="settings-body">
                <div class="setting-item">
                    <label>Background Effects</label>
                    <label class="switch">
                        <input type="checkbox" id="background-effects" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>Custom Content</label>
                    <label class="switch">
                        <input type="checkbox" id="custom-content-toggle" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>Anti-Close <small>(prevents extensions from closing this tab)</small></label>
                    <label class="switch">
                        <input type="checkbox" id="anti-close">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>Auto Open in about:blank</label>
                    <label class="switch">
                        <input type="checkbox" id="auto-about-blank">
                        <span class="slider"></span>
                    </label>
                </div>
                <div style="text-align: right;">
                    <button class="small-button" id="open-now-button" onclick="openInAboutBlankNow()">Open in about:blank now</button>
                </div>
                <div class="setting-item">
                    <label>Change Cloak</label>
                    <select name="cloak" data-cloak-select>
                        <option value="default">Default</option>
                        <option value="google">Google</option>
                        <option value="wiki">Wikipedia</option>
                        <option value="Classroom">Google Classroom</option>
                    </select>
                </div>
                    <div class="setting-item">
                    <label>Theme</label>
                    <select id="theme-select">
                        <option value="default">Default</option>
                        <option value="night">Night</option>
                    </select>
                  </div>
                <div class="setting-item">
                    <label>Dot Speed</label>
                    <select id="dot-speed-select">
                        <option value="normal">Normal</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <a href="https://info.flagcounter.com/HpnN"><img src="https://s01.flagcounter.com/count/HpnN/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_10/viewers_0/labels_0/pageviews_0/flags_0/percent_0/" alt="Flag Counter" border="0"></a>
    <a>there’s a sidebar btw</a>

    <script src="../pluginstuff.js"></script>
    <script src="../effects.js"></script>
    <script>
        const isInAboutBlank = window.location.href === 'about:blank' || window.top !== window.self;

        function handleAutoAboutBlank() {
            const autoAboutBlank = localStorage.getItem('autoAboutBlank') === 'true';
            if (autoAboutBlank && !isInAboutBlank) {
                openInAboutBlank();
                window.location.href = 'https://www.google.com';
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            const container = document.querySelector('.effects-container');
            const bgEffects = localStorage.getItem('backgroundEffects') !== 'false';
            document.getElementById('background-effects').checked = bgEffects;
            if (bgEffects) {
                container.style.display = 'block';
            } else {
                container.style.display = 'none';
            }

            const customContentEnabled = localStorage.getItem('customContentEnabled') !== 'false';
            document.getElementById('custom-content-toggle').checked = customContentEnabled;
            document.querySelector('.custom-content').style.display = customContentEnabled ? 'block' : 'none';

            const autoAboutBlank = localStorage.getItem('autoAboutBlank') === 'true';
            document.getElementById('auto-about-blank').checked = autoAboutBlank;

            const antiClose = localStorage.getItem('antiClose') === 'true';
            document.getElementById('anti-close').checked = antiClose;
            applyAntiClose();

            const cloakSelect = document.querySelector('[data-cloak-select]');
            const savedCloak = localStorage.getItem('selectedCloak') || 'default';
            cloakSelect.value = savedCloak;
            applyCloak(savedCloak);

            const themeSelect = document.getElementById('theme-select');
            const savedTheme = localStorage.getItem('selectedTheme') || 'default';
            themeSelect.value = savedTheme;
            setTheme(savedTheme);

            const dotSpeedSelect = document.getElementById('dot-speed-select');
            const savedDotSpeed = localStorage.getItem('selectedDotSpeed') || 'normal';
            dotSpeedSelect.value = savedDotSpeed;
            setDotSpeed(savedDotSpeed);

            handleAutoAboutBlank();
            renderContentList();

            document.querySelector('.sidebar').addEventListener('click', function(event) {
                const link = event.target.closest('a');
                if (link && link.href) {
                    event.preventDefault();
                    const autoAboutBlank = document.getElementById('auto-about-blank').checked;
                    if (autoAboutBlank) {
                        loadURL(link.href);
                    } else {
                        window.location.href = link.href;
                    }
                }
            });

            document.getElementById('website-list').addEventListener('click', function(event) {
                const link = event.target.closest('a');
                if (link && link.href) {
                    event.preventDefault();
                    loadURL(link.href);
                }
            });

            document.getElementById('game-list').addEventListener('click', function(event) {
                const link = event.target.closest('a');
                if (link && link.href) {
                    event.preventDefault();
                    loadURL(link.href);
                }
            });

            document.getElementById('urlInput').addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    const url = this.value.trim();
                    if (url) loadURL(url);
                }
            });

            document.getElementById('background-effects').addEventListener('change', function(e) {
                const effectsContainer = document.querySelector('.effects-container');
                if (e.target.checked) {
                    effectsContainer.style.display = 'block';
                } else {
                    effectsContainer.style.display = 'none';
                }
                localStorage.setItem('backgroundEffects', e.target.checked);
            });

            themeSelect.addEventListener('change', function() {
                setTheme(this.value);
            });

            dotSpeedSelect.addEventListener('change', function() {
                setDotSpeed(this.value);
            });
        });

        function toggleChangelog() {
            const content = document.getElementById('changelog-content');
            content.style.display = content.style.display === 'block' ? 'none' : 'block';
        }

        function toggleSettings() {
            const overlay = document.getElementById('settings-overlay');
            overlay.style.display = overlay.style.display === 'flex' ? 'none' : 'flex';
        }

        function toggleView() {
            const gameList = document.getElementById('game-list');
            const websiteList = document.getElementById('website-list');
            const toggleButton = document.getElementById('toggle-view');
            const header = document.getId('page-header');
            if (gameList.style.display === 'none') {
                gameList.style.display = 'block';
                websiteList.style.display = 'none';
                toggleButton.textContent = 'Toggle Websites';
                header.textContent = 'Unblockee games';
            } else {
                gameList.style.display = 'none';
                websiteList.style.display = 'block';
                toggleButton.textContent = 'Toggle Games';
                header.textContent = 'Unblockee websites';
            }
        }

        document.getElementById('custom-content-toggle').addEventListener('change', function(e) {
            const customContent = document.querySelector('.custom-content');
            customContent.style.display = e.target.checked ? 'block' : 'none';
            localStorage.setItem('customContentEnabled', e.target.checked);
        });

        document.getElementById('auto-about-blank').addEventListener('change', function(e) {
            const isChecked = e.target.checked;
            localStorage.setItem('autoAboutBlank', isChecked);
            if (isChecked && !isInAboutBlank) {
                openInAboutBlank();
                window.location.href = 'https://www.google.com';
            }
        });

        document.getElementById('anti-close').addEventListener('change', function(e) {
            localStorage.setItem('antiClose', e.target.checked);
            applyAntiClose();
        });

        document.getElementById('settings-overlay').addEventListener('click', function(e) {
            if (e.target === this) toggleSettings();
        });

        function applyAntiClose() {
            const targetWindow = inFrame() ? window.top : window;
            const handler = function(e) {
                e.preventDefault();
                e.returnValue = 'Are you sure you want to leave?';
                return 'Are you sure you want to leave?';
            };
            targetWindow.removeEventListener('beforeunload', handler);
            if (localStorage.getItem('antiClose') === 'true') {
                targetWindow.addEventListener('beforeunload', handler);
            }
        }

        function applyCloak(cloak) {
            const cloaks = [
                { name: "default", icon: "", title: "" },
                { name: "google", icon: "/icons/chrome.webp", title: "New Tab" },
                { name: "wiki", icon: "https://en.wikipedia.org/favicon.ico", title: "Wikipedia" },
                { name: "Classroom", icon: "/icons/classroom.webp", title: "Home" }
            ];
            const selectedCloak = cloaks.find(c => c.name === cloak) || cloaks[0];
            if (selectedCloak.title) document.title = selectedCloak.title;
            
            let existingFavicon = document.querySelector("link[rel*='icon']");
            if (existingFavicon) existingFavicon.remove();
            
            if (selectedCloak.icon) {
                const link = document.createElement('link');
                link.rel = 'icon';
                link.type = 'image/x-icon';
                link.href = selectedCloak.icon + (selectedCloak.icon.includes('?') ? '&' : '?') + 'v=' + Date.now();
                document.head.appendChild(link);
            }
        }

        let savedContent = JSON.parse(localStorage.getItem('customURLs') || '[]');

        function isValidURL(string) {
            try {
                const url = new URL(string);
                const hostname = url.hostname;
                if (!['http:', 'https:'].includes(url.protocol)) return false;
                if (/\s/.test(hostname) || !/^([a-z0-9-]+\.)+[a-z]{2,}$/i.test(hostname)) return false;
                return true;
            } catch (_) {
                return false;
            }
        }

        function loadURL(url) {
            let isRelative = false;
            if (!/^https?:\/\//i.test(url)) {
                isRelative = true;
                if (!url.startsWith('/')) {
                    url = 'https://' + url;
                } else {
                    url = new URL(url, window.location.origin).href;
                }
            }
            
            if (!isRelative && !isValidURL(url)) {
                alert('Invalid URL format. Please enter a valid URL without spaces in the domain.');
                return;
            }
            
            const newWindow = window.open('about:blank', '_blank');
            if (!newWindow) {
                alert('Failed to open new window. Pop-ups might be blocked.');
                return;
            }
            
            const doc = newWindow.document;
            doc.open();
            doc.write(`<!DOCTYPE html><html><head><meta charset="UTF-8"><style>body { margin: 0; overflow: hidden; } iframe { width: 100vw; height: 100vh; border: none; }</style></head><body><iframe src="${url}"></iframe></body></html>`);
            doc.close();
        }

        function openInAboutBlank() {
            const currentUrl = window.location.href;
            const newWindow = window.open('about:blank', '_blank');
            if (!newWindow) {
                alert('Failed to open new window. Pop-ups might be blocked.');
                return;
            }
            const doc = newWindow.document;
            doc.open();
            doc.write(`<!DOCTYPE html><html><head><meta charset="UTF-8"><style>body { margin: 0; overflow: hidden; } iframe { width: 100vw; height: 100vh; border: none; }</style></head><body><iframe src="${currentUrl}"></iframe></body></html>`);
            doc.close();
        }

        function openInAboutBlankNow() {
            openInAboutBlank();
        }

        function addContent() {
            const name = prompt("This embeds a website, embeds aren't blocked.\nA lot of websites block this though", "App name here");
            if (!name) return;
            const url = prompt("URL", "https://");
            if (!url || !url.includes('.')) {
                alert('Please enter a valid URL');
                return;
            }
            savedContent.push({ name, url });
            localStorage.setItem('customURLs', JSON.stringify(savedContent));
            renderContentList();
        }

        function deleteLastContent() {
            if (savedContent.length > 0) {
                savedContent.pop();
                localStorage.setItem('customURLs', JSON.stringify(savedContent));
                renderContentList();
            } else {
                alert('No custom URLs to delete.');
            }
        }

        function deleteAllContent() {
            if (confirm('Are you sure you want to delete all custom URLs?')) {
                savedContent = [];
                localStorage.setItem('customURLs', JSON.stringify(savedContent));
                renderContentList();
            }
        }

        function renderContentList() {
            const contentList = document.getElementById('contentList');
            contentList.innerHTML = '';
            const customContentEnabled = document.getElementById('custom-content-toggle').checked;
            if (!customContentEnabled) return;

            savedContent.forEach((item) => {
                const button = document.createElement('button');
                button.className = 'content-button';
                button.textContent = item.name;
                button.title = item.url;
                button.onclick = () => loadURL(item.url);
                contentList.appendChild(button);
            });
            const deleteLastButton = document.getElementById('deleteLastButton');
            deleteLastButton.disabled = savedContent.length === 0;
        }

        const cloakSelect = document.querySelector('[data-cloak-select]');
        cloakSelect.addEventListener('change', function() {
            const selectedCloak = this.value;
            localStorage.setItem('selectedCloak', selectedCloak);
            applyCloak(selectedCloak);
        });
    </script>
</body>
</html>
